{"version":3,"file":"bundle.js","sources":["../src/load.js","../src/utils/event_emitter.js","../src/utils/buffer.js","../src/fetch_loader.js","../src/main.js"],"sourcesContent":["var Module = {};\nvar script;\n//to bind arguments in the right order\nfunction bindLastArgs(func, ...boundArgs) {\n  return function(...baseArgs) {\n    return func(...baseArgs, ...boundArgs);\n  }\n}\n\nexport default function loadWASM() {\n  return new Promise((resolve, reject) => {\n    self.fetch('./videox-decoder-video-wasm.wasm')\n      .then(response => response.arrayBuffer())\n      .then(buffer => {\n        Module.wasmBinary = buffer;\n        // GLOBAL -- create custom event for complete glue script execution\n        // Emscripten编译的函数如_grayScale，_malloc等会挂到全局环境下\n        var script = document.createElement('script');\n        script.onload = buildWam;\n        // END GLOBAL\n        script.src = './videox-decoder-video-wasm.js';\n        document.body.appendChild(script);\n\n        // 构建wam模块\n        function buildWam() {\n          // const decoderModule = DECODERWASM({});\n          let wam = {};\n          // Module.onRuntimeInitialized = function () {\n          //   wam['setFile'] = Module.cwrap('setFile', 'number', ['number', 'number', 'number']);\n          //   // console.log('WASM initialized done!');\n          //   // if (form.file.value) {\n          //   //     process();\n          //   // }\n          // };\n          // console.log('Emscripten boilerplate loaded.');\n          resolve(wam);\n        }\n      });\n  });\n}","class EventEmitter {\n  on(key, listener) {\n    if (!this._events) {\n      this._events = {};\n    }\n\n    if (!this._events[key]) {\n      this._events[key] = [];\n    }\n\n    if (\n      !this._events[key].indexOf(listener) !== -1 &&\n      typeof listener === 'function'\n    ) {\n      this._events[key].push(listener);\n    }\n\n    return this;\n  }\n\n  emit(key) {\n    if (!this._events || !this._events[key]) return;\n    let args = Array.prototype.slice.call(arguments, 1) || [];\n    let listeners = this._events[key];\n    let i = 0;\n    let l = listeners.length;\n    for (i; i < l; i++) {\n      listeners[i].apply(this, args);\n    }\n    return this;\n  }\n\n  off(key, listener) {\n    if (!key && !listener) {\n      this._events = {};\n    }\n\n    if (key && !listener) {\n      delete this._events[key];\n    }\n\n    if (key && listener) {\n      const listeners = this._events[key];\n      const index = listeners.indexOf(listener);\n      listeners.splice(index, 1);\n    }\n    return this;\n  }\n}\n\nexport default EventEmitter;\n","\nconst TIME_OFFSET = 2082844800000;\n\nconst Buffer = {\n  /**\n   * 拼接buffer\n   */\n  concat(bufferlist) {\n    const byteLength = bufferlist.reduce((sum, buf) => sum + buf.byteLength, 0);\n    const tmp = new Uint8Array(byteLength);\n\n    let offset = 0;\n    bufferlist.forEach(buffer => {\n      tmp.set(new Uint8Array(buffer), offset);\n      offset += buffer.byteLength;\n    });\n\n    return tmp.buffer;\n  },\n\n  /**\n   * 读取32位大端字节序\n   */\n  readUInt32BE(buffer, offset) {\n    const arr = new Uint8Array(buffer);\n    return (arr[offset] << 24) | (arr[offset + 1] << 16) | (arr[offset + 2] << 8) | arr[offset + 3];\n  },\n\n  /**\n   * 读取24位大端字节序\n   */\n  readUInt24BE(buffer, offset) {\n    const arr = new Uint8Array(buffer);\n    return (arr[offset] << 16) | (arr[offset + 1] << 8) | arr[offset + 2];\n  },\n\n  /**\n   * 读取16位大端字节序\n   */\n  readUInt16BE(buffer, offset) {\n    const arr = new Uint8Array(buffer);\n    return (arr[offset] << 8) | (arr[offset + 1]);\n  },\n\n  /**\n   * 读取1字节\n   */\n  readUInt8(buffer, offset) {\n    const arr = new Uint8Array(buffer);\n    return arr[offset];\n  },\n\n  /**\n   * 转化成字符串\n   */\n  readToString(buffer) {\n    const uintArray = new Uint8Array(buffer);\n    const encodedString = String.fromCharCode(...uintArray);\n    const decodedString = decodeURIComponent(escape(encodedString));\n    return decodedString;\n  },\n\n  /**\n   * 转化成32位时间戳\n   */\n  readDate(buffer, offset) {\n    return new Date(Buffer.readUInt32BE(buffer, offset) * 1000 - TIME_OFFSET);\n  },\n\n  /**\n   * 转化成32位字符串拼接的浮点数\n   */\n  readFixed32(buffer, offset) {\n    return Buffer.readUInt16BE(buffer, offset) + Buffer.readUInt16BE(buffer, offset + 2) / (256 * 256);\n  },\n\n  /**\n   * 转化成16位字符串拼接的浮点数\n   */\n  readFixed16(buffer, offset) {\n    return Buffer.readUInt8(buffer, offset) + Buffer.readUInt8(buffer, offset + 1) / 256;\n  }\n};\n\nexport default Buffer;\n","import EventEmitter from './utils/event_emitter';\nimport Buffer from './utils/buffer';\n\nconst Status = {\n  Idle: 0,\n  Connecting: 1,\n  Buffering: 2,\n  Error: 3,\n  Complete: 4\n};\n\nclass FetchLoader extends EventEmitter {\n  constructor() {\n    super();\n\n    this._url = '';\n    this._receivedLength = 0;\n    this._status = Status.Idle;\n    this.requestAbort = false;\n    this._cacheBufferList = [];\n  }\n\n  open(url) {\n    this._url = url;\n\n    let params = {\n      method: 'GET',\n      mode: 'cors',\n      cache: 'default',\n      referrerPolicy: 'no-referrer-when-downgrade'\n    };\n\n    this._status = Status.Connecting;\n\n    window\n      .fetch(this._url)\n      .then(res => {\n        if (res.ok && res.status >= 200 && res.status <= 299) {\n          return this._pump.call(this, res.body.getReader());\n        } else {\n          this._status = Status.Error;\n        }\n      })\n      .catch(err => {\n        this._status = Status.Error;\n      });\n  }\n\n  pause() {\n    this.requestAbort = true;\n  }\n\n  _pump(reader) {\n    // ReadableStreamReader\n    return reader\n      .read()\n      .then(result => {\n        if (result.done) {\n          this._status = Status.Complete;\n          this.emit('loadComplete', Buffer.concat(this._cacheBufferList));\n          // const buffer = {\n          //   chunk: Buffer.concat(...this._cacheBufferList),\n          //   byteStart: 0,\n          //   byteLength: this._receivedLength\n          // };\n\n          // this.emit('dataArrival', buffer);\n        } else {\n          if (this.requestAbort === true) {\n            this.requestAbort = false;\n            return reader.cancel();\n          }\n          this._status = Status.Buffering;\n          let chunk = result.value.buffer;\n          let byteStart = this._receivedLength;\n          this._receivedLength += chunk.byteLength;\n          this._cacheBufferList.push(chunk);\n          this.emit('dataArrival', {\n            chunk: chunk,\n            byteStart: byteStart,\n            byteLength: chunk.byteLength\n          });\n\n          this._pump(reader);\n        }\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }\n}\n\nexport default FetchLoader;","import loadWASM from './load.js';\nimport FetchLoader from './fetch_loader';\n\n// even though Rollup is bundling all your files together, errors and\n// logs will still point to your original source modules\nconsole.log('if you have sourcemaps enabled in your devtools, click on main.js:5 -->');\n\nlet setFile;\nlet tipDom = document.getElementById('tip');\nlet ts = 0;\n\nloadWASM().then(wam => {\n  Module.onRuntimeInitialized = function () {\n    tipDom.innerHTML = 'wasm加载完成，解码中…';\n    let offset = Module._malloc(buffer.length);\n    console.log(offset);\n    Module.HEAP8.set(buffer, offset);\n    // 好像单线程啊！！！会等执行完。。。\n    Module._videox_decoder_init(offset, buffer.length);\n    tipDom.innerHTML = '解码完成…播放中';\n    setInterval(() => {\n      const ptr = framePtrList.shift();\n      draw(ptr);\n    }, 40);  \n    // setFile = Module.cwrap('setFile', 'number', ['number', 'number', 'number']);\n  };\n});\n\nconst loader = new FetchLoader();\nloader.open('https://sparkmorry.github.io/mse-learning/h265/hd_265.mp4');\n\nlet buffer;\nloader.on('loadComplete', (e) => {\n  buffer = new Uint8Array(e);\n});\n\nlet memCanvas = document.createElement('canvas'),\nmemContext = memCanvas.getContext('2d');\nlet canvas = document.querySelector('#canvas'),\n  ctx = canvas.getContext('2d');\ncanvas.width = Math.max(600, window.innerWidth - 40);\nfunction drawImage(width, height, buffer) {\n  let imageData = ctx.createImageData(width, height);\n  let k = 0;\n  for (let i = 0; i < buffer.length; i++) {\n      if (i && i % 3 === 0) {\n          imageData.data[k++] = 255;\n      }\n      imageData.data[k++] = buffer[i];\n  }\n  imageData.data[k] = 255;\n  memCanvas.width = width;\n  memCanvas.height = height;\n  canvas.height = canvas.width * height / width;\n  memContext.putImageData(imageData, 0, 0, 0, 0, width, height);\n  ctx.drawImage(memCanvas, 0, 0, width, height, 0, 0, canvas.width, canvas.height);\n}\n\nlet lastTs = 0;\nlet currentTs = 0;\nlet framePtrList = [];\nwindow.cacheFrame = (ptr) => {\n  currentTs = performance.now();\n  console.log('decode duration', currentTs - lastTs);\n  framePtrList.push(ptr);\n  lastTs = currentTs;\n}\nconst draw = (ptr) => {\n  let width = Module.HEAPU32[ptr / 4];\n  let height = Module.HEAPU32[ptr / 4 + 1];\n  let imgBufferPtr = Module.HEAPU32[ptr / 4 + 2];\n  let imageBuffer = Module.HEAPU8.subarray(imgBufferPtr, imgBufferPtr + width * height * 3);\n  if (!width || !height) {\n    return;\n  }\n  drawImage(width, height, imageBuffer);\n  Module._free(ptr);\n  Module._free(imgBufferPtr);\n}\n\n\n\n"],"names":[],"mappings":"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"}